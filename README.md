# GEOMETRICA

> A single-file pseudo-3D game engine and tech demo, written from scratch in pure C with SDL2.

  
*(–ë—Ä–æ, —Å–¥–µ–ª–∞–π –∫—Ä—É—Ç–æ–π —Å–∫—Ä–∏–Ω—à–æ—Ç –∏–ª–∏ –≥–∏—Ñ–∫—É, –∑–∞–≥—Ä—É–∑–∏ –Ω–∞ imgur.com –∏ –≤—Å—Ç–∞–≤—å —Å—Å—ã–ª–∫—É —Å—é–¥–∞)*

## –û –ø—Ä–æ–µ–∫—Ç–µ

**GEOMETRICA** ‚Äî —ç—Ç–æ –∞–º–±–∏—Ü–∏–æ–∑–Ω—ã–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –∏–≥—Ä–æ–≤–æ–≥–æ –¥–≤–∏–∂–∫–∞ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ –Ω–∞ —á–∏—Å—Ç–æ–º C. –ù–∏–∫–∞–∫–∏—Ö —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –¥–≤–∏–∂–∫–æ–≤, —Ç–æ–ª—å–∫–æ SDL2 –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–∫–Ω–∞ –∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∏ —á–∏—Å—Ç–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ.

–ü—Ä–æ–µ–∫—Ç –Ω–∞—á–∏–Ω–∞–ª—Å—è –∫–∞–∫ –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–Ω–¥–µ—Ä –∫—É–±–∞ –∏ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª –≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –ø–µ—Å–æ—á–Ω–∏—Ü—É —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—é—â–∏–º—Å—è –º–∏—Ä–æ–º, —Ñ–∏–∑–∏–∫–æ–π –∏ –¥–∞–∂–µ –∑–∞—á–∞—Ç–∫–∞–º–∏ —Å—é–∂–µ—Ç–∞. –í–µ—Å—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π (CPU-based), —á—Ç–æ —Å—Ç–∞–≤–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

## üöÄ –§–∏—á–∏ –¥–≤–∏–∂–∫–∞

*   **–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –ø—Å–µ–≤–¥–æ-3D —Ä–µ–Ω–¥–µ—Ä:** –í—Å—ë —Ä–∏—Å—É–µ—Ç—Å—è "—Ä—É–∫–∞–º–∏" —á–µ—Ä–µ–∑ –ø—Ä–æ–µ–∫—Ü–∏–∏ –∏ Z-–±—É—Ñ–µ—Ä.
*   **–û–¥–∏–Ω —Ñ–∞–π–ª:** –í–µ—Å—å –∫–æ–¥, –æ—Ç —Ä–µ–Ω–¥–µ—Ä–∞ –¥–æ –ª–æ–≥–∏–∫–∏ –∏–≥—Ä—ã, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `untitled.c`.
*   **–°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã:** –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –≥–ª–∞–≤–Ω—ã–º –º–µ–Ω—é, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏ –∏–≥—Ä–æ–≤—ã–º —Ä–µ–∂–∏–º–æ–º.
*   **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
    *   Frustum Culling (–æ—Ç—Å–µ—á–µ–Ω–∏–µ –Ω–µ–≤–∏–¥–∏–º–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏).
    *   –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ (LOD) –¥–ª—è –º–µ–ª–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.
    *   –ü—Ä–µ–¥—Ä–∞—Å—á–µ—Ç —Ç—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏–∏ —á–µ—Ä–µ–∑ Look-Up Tables (`fast_sin`, `fast_cos`).
    *   "–ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å" –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –ª–∏–Ω–∏–π.
    *   –°–±–æ—Ä–∫–∞ —Å —Ñ–ª–∞–≥–æ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ `-O3`.
*   **–ú–µ–Ω–µ–¥–∂–µ—Ä –∞—Å—Å–µ—Ç–æ–≤:** –ü—Ä–æ—Å—Ç–∞—è —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à—Ä–∏—Ñ—Ç–∞–º–∏ –∏ –¥—Ä—É–≥–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.

## üéÆ –ì–µ–π–º–ø–ª–µ–π –∏ —Ñ–∏—à–∫–∏

*   **–≠–≤–æ–ª—é—Ü–∏—è –º–∏—Ä–∞:** –ú–∏—Ä –≤–∏–∑—É–∞–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç—Å—è –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ wireframe-–∫–∞—Ä–∫–∞—Å–∞ –¥–æ "–º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π" —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –º–µ—Ä–µ —Å–±–æ—Ä–∞ –º–æ–Ω–µ—Ç.
*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ü–∏–∫–ª –¥–Ω—è –∏ –Ω–æ—á–∏:** –° –ø–ª–∞–≤–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –æ—Å–≤–µ—â–µ–Ω–∏—è –∏ —Ü–≤–µ—Ç–∞ –Ω–µ–±–∞.
*   **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω:** –í–Ω—É—Ç—Ä–∏–∏–≥—Ä–æ–≤–æ–π UI –¥–ª—è –≤—ã–∑–æ–≤–∞ "–î–µ–º–æ–∫—Ä–∞—Ç–∏–∏" ‚Äî –∫–∏–Ω–µ–º–∞—Ç–æ–≥—Ä–∞—Ñ–∏—á–Ω–æ–≥–æ –∞–≤–∏–∞—É–¥–∞—Ä–∞ —Å –∏—Å—Ç—Ä–µ–±–∏—Ç–µ–ª—è–º–∏ –∏ –≤–∑—Ä—ã–≤–∞–º–∏.
*   **–§–∏–∑–∏–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤:** –ü–æ–¥–±–∏—Ä–∞–µ–º—ã–µ –∏ –±—Ä–æ—Å–∞–µ–º—ã–µ –±—É—Ç—ã–ª–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞–∑–±–∏–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–∫–æ–ª–∫–∏.
*   **–ë–æ—Å—Å-—Ñ–∞–π—Ç:** –°—Ä–∞–∂–µ–Ω–∏–µ —Å RKN-chan, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–∑—ã–≤–∞–µ—Ç "–≥–ª—é–∫–∏".
*   **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–º:** –ü–ª–∞–≤–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞ —Å –∏–Ω–µ—Ä—Ü–∏–µ–π –≤ –≤–æ–∑–¥—É—Ö–µ, –ø—Ä—ã–∂–∫–∞–º–∏, –ø—Ä–∏—Å–µ–¥–∞–Ω–∏—è–º–∏ –∏ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ–º –∫–∞–º–µ—Ä—ã.

## ‚ú® UI –∏ UX

*   **–°—Ç–∏–ª—å–Ω–æ–µ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:** –° –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.
*   **–≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–µ–∫:** –ü–æ–∑–≤–æ–ª—è–µ—Ç –º–µ–Ω—è—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `settings.cfg`.
*   **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫:** Splash screen "INITIALIZING REALITY KERNEL..." —Å–∫—Ä—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤.
*   **–ü–ª–∞–≤–Ω—ã–π –≤—ã—Ö–æ–¥:** –≠—Ñ—Ñ–µ–∫—Ç –∑–∞—Ç—É—Ö–∞–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –∏–≥—Ä—ã.
*   **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (F3) –∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (F1).

## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ—Ä–µ–∫–≤–∏–∑–∏—Ç—ã

1.  **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä GCC** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è MinGW-w64 –¥–ª—è Windows).
2.  **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ SDL2 –∏ SDL2_ttf.** –°–∫–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://libsdl.org/download-2.0.php).

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø—É—Ç–∏ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º SDL2 —É–∫–∞–∑–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Ç–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã.

**–®–∞–±–ª–æ–Ω –∫–æ–º–∞–Ω–¥—ã:**
```bash
gcc -O3 untitled.c -o cube.exe -I path/to/SDL2/include -L path/to/SDL2/lib -lSDL2main -lSDL2_ttf -lSDL2 -lm
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è —Ç–≤–æ–µ–π —Å–∏—Å—Ç–µ–º—ã:**
```bash
gcc -O3 C:\Users\cholo\untitled.c -o C:\Users\cholo\cube.exe -I C:\Users\cholo\Downloads\SDL2-devel-2.32.10-mingw\SDL2-2.32.10\x86_64-w64-mingw32\include\SDL2 -L C:\Users\cholo\Downloads\SDL2-devel-2.32.10-mingw\SDL2-2.32.10\x86_64-w64-mingw32\lib -lSDL2main -lSDL2_ttf -lSDL2 -lgdi32 -lrpcrt4 -lusp10 -lm
```

### –ó–∞–ø—É—Å–∫

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É (–∏–ª–∏ —Å–∫–∏–Ω—É—Ç—å –¥—Ä—É–≥—É), —Å–æ–∑–¥–∞–π –ø–∞–ø–∫—É –∏ –ø–æ–ª–æ–∂–∏ –≤ –Ω–µ—ë:
*   `cube.exe` (—Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–≥—Ä–∞)
*   `SDL2.dll`
*   `SDL2_ttf.dll`
*   `libfreetype-6.dll` (–Ω—É–∂–µ–Ω –¥–ª—è `SDL2_ttf`)
*   `zlib1.dll` (—Ç–æ–∂–µ –Ω—É–∂–µ–Ω –¥–ª—è `SDL2_ttf`)
*   `arial.ttf` (—Ñ–∞–π–ª —à—Ä–∏—Ñ—Ç–∞)
*   `settings.cfg` (—Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫, —Å–æ–∑–¥–∞—Å—Ç—Å—è —Å–∞–º)

## üïπÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

| –ö–ª–∞–≤–∏—à–∞       | –î–µ–π—Å—Ç–≤–∏–µ                                     |
|---------------|----------------------------------------------|
| **WASD**      | –î–≤–∏–∂–µ–Ω–∏–µ                                     |
| **–ú—ã—à—å**      | –û—Å–º–æ—Ç—Ä                                       |
| **–ü—Ä–æ–±–µ–ª**    | –ü—Ä—ã–∂–æ–∫                                       |
| **Shift**     | –ë–µ–≥                                          |
| **Ctrl**      | –ü—Ä–∏—Å–µ–¥–∞–Ω–∏–µ                                   |
| **P**         | –î–æ—Å—Ç–∞—Ç—å/—É–±—Ä–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω                       |
| **Enter**     | (–ö–æ–≥–¥–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ—Å—Ç–∞–ª) –í—ã–∑–≤–∞—Ç—å "–î–µ–º–æ–∫—Ä–∞—Ç–∏—é"  |
| **F1**        | –í–∫–ª/–í—ã–∫–ª —Ä–µ–¥–∞–∫—Ç–æ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–≤ –∏–≥—Ä–µ)        |
| **F3**        | –í–∫–ª/–í—ã–∫–ª –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏    |
| **Esc**       | –í—ã—Ö–æ–¥ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é / –í—ã—Ö–æ–¥ –∏–∑ –∏–≥—Ä—ã         |
| **–°—Ç—Ä–µ–ª–∫–∏**   | –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –º–µ–Ω—é                             |

## üöß –ë—É–¥—É—â–∏–µ –ø–ª–∞–Ω—ã

-   [ ] **–†–∞–∑–≤–∏—Ç–∏–µ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞** (—Å–µ–π—á–∞—Å –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞).
-   [ ] –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–∞ –∏ –º—É–∑—ã–∫–∏ —á–µ—Ä–µ–∑ `SDL2_mixer`.
-   [ ] –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –≤—Ä–∞–≥–∏ –∏ AI.
-   [ ] –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

---

*Let's see where this rabbit hole goes.*
